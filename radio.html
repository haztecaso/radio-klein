---
layout: page
title: "Radio"
permalink: /radio/
---

<div class="player">
	<div class="amplitude-play-pause" data-amplitude-song-index="1"></div>
	<div class="data">
		<span class="title">biciclista</span>
		<span class="playing" id="radiodata1">-</span>
		<span class="listeners" id="radiolisteners1">0</span>
	</div>
</div>


<div class="player">
	<div class="amplitude-play-pause" data-amplitude-song-index="0"></div>
	<div class="data">
		<span class="title">funkbike</span>
		<span class="playing" id="radiodata0">-</span>
		<span class="listeners" id="radiolisteners0">0</span>
	</div>
</div>

<script type="text/javascript" src="{{ site.baseurl }}/assets/amplitude.js"></script>
<script>
Amplitude.init({
  "songs": [
    {
      "url": "https://haztecaso.mooo.com:8085/radio",
      "live": true
    },
    {
      "url": "https://haztecaso.mooo.com:8085/radiojuan",
      "live": true
    }
  ]
});

function getData(json){
	data = json;
	console.log(json);
}

function loadJSON(callback) {
	var xobj = new XMLHttpRequest();
	xobj.overrideMimeType("application/json");
	xobj.open('GET', 'https://haztecaso.mooo.com:8085/status-json.xsl', true);
	xobj.onreadystatechange = function () {
		if (xobj.readyState == 4 && xobj.status == "200") {callback(xobj.responseText);}
	};
	xobj.send(null);
}
window.setInterval(function(){
	loadJSON(function(response) {
		data = JSON.parse(response.replace(": - ",": \"archivo sin metadatos\"")).icestats.source;
		document.getElementById('radiodata1').innerHTML = data[1].title;
		document.getElementById('radiolisteners1').innerHTML = data[1].listeners;
		document.getElementById('radiodata0').innerHTML = data[0].title;
		document.getElementById('radiolisteners0').innerHTML = data[0].listeners;
	});
}, 1000);



</script>
