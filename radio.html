---
layout: page
title: "Radio"
permalink: /radio/
---

<h2>Radio Juan</h2>
<p>...</p>

<p><div class="amplitude-play-pause" data-amplitude-song-index="1"></div></p>
<p>Está sonando: <span id="titlejuan"></span></p>
<p>Número de oyentes: <span id="listenersjuan"></span></p>


<h2>Radio Adri</h2>
<p>Música random.</p>
<p>Está sonando: <span id="titleadri"></span></p>
<p>Número de oyentes: <span id="listenersadri"></span></p>

<!--
<div class="player">
<div class="amplitude-play-pause" data-amplitude-song-index="0"></div>
<ol>
	<li class="title">Radio Adri</li>
	<li class="metadata" id="radiodata-0"></li>
	<li class="listeners" id="radiolisteners-0"></li>
</ol>
</div>
-->

<script type="text/javascript" src="{{ site.baseurl }}/assets/amplitude.js"></script>
<script>
Amplitude.init({
  "songs": [
    {
      "url": "https://haztecaso.mooo.com:8085/radio",
      "live": true
    },
    {
      "url": "https://haztecaso.mooo.com:8085/radiojuan",
      "live": true
    }
  ]
});

function getData(json){
	data = json;
	console.log(json);
}

function loadJSON(callback) {
	var xobj = new XMLHttpRequest();
	xobj.overrideMimeType("application/json");
	xobj.open('GET', 'https://haztecaso.mooo.com:8085/status-json.xsl', true);
	xobj.onreadystatechange = function () {
		if (xobj.readyState == 4 && xobj.status == "200") {callback(xobj.responseText);}
	};
	xobj.send(null);
}
window.setInterval(function(){
	loadJSON(function(response) {
		data = JSON.parse(response.replace(": - ",": \"archivo sin metadatos\"")).icestats.source;
		document.getElementById('titlejuan').innerHTML = data[1].title;
		document.getElementById('listenersjuan').innerHTML = data[1].listeners;
		document.getElementById('titleadri').innerHTML = data[0].title;
		document.getElementById('listenersadri').innerHTML = data[0].listeners;
		document.getElementById('radiodata-0').innerHTML = data[0].title;
		document.getElementById('radiolisteners-0').innerHTML = data[0].listeners;
	});
}, 1000);



</script>
